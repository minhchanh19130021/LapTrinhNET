@model WatchStore.Models.SharedProductDetail
@{
    ViewBag.Title = "Detail";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="container-fluid bg-light breadcrumb-section">
    <div class="container pt-2">
        <div aria-label="breadcrumb ">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Product Detail</li>
            </ol>
        </div>
    </div>
</div>

<div class="container">
    <div class="row gy-5">
        <div class="col-lg-6 col-md-12">
            <div id="carouselExampleDark" class="carousel carousel-dark slide" data-bs-ride="carousel">

                <div class="carousel-inner">
                    <div class="carousel-item active" data-bs-interval="10000">
                        <img src="~/Content/img/product/@Model.Detail.Avatar"
                             class="d-flex m-auto" width="500px" style="object-fit: cover;object-position:center" height="466px" alt="...">
                    </div>
                    <div class="carousel-item" data-bs-interval="2000">
                        <img src="~/Content/img/product/@Model.Detail.Images.First().Url"
                             class="d-flex m-auto" width="500px" style="object-fit: cover;object-position:center" height="466px" alt="...">

                    </div>
                    <div class="carousel-item">
                        <img src="~/Content/img/product/@Model.ImageDetail.Where(p=>p.Product.Equals(Model.Detail.Id)).Last().Url"
                             class="d-flex m-auto " width="500px" style="object-fit: cover;object-position:center" height="466px" alt="...">
                    </div>
                </div>
                <div class="d-flex justify-content-evenly mt-3">
                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="0" class="active"
                            aria-current="true" aria-label="Slide 1" style="background-color:transparent;border:none;outline:none">
                        <img src="~/Content/img/product/@Model.Detail.Avatar" class="d-block"
                             width="120px" height="140px" style="object-fit: cover; object-position: center; border-radius: 5px;" alt="...">
                    </button>

                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="1"
                            aria-label="Slide 2"  style="background-color:transparent;border:none;outline:none">
                        <img src="~/Content/img/product/@Model.Detail.Images.First().Url" class="d-block"
                             width="120px" height="140px" style="object-fit: cover;object-position:center; border-radius:5px;" alt="...">
                    </button>
                    <button type="button" data-bs-target="#carouselExampleDark" data-bs-slide-to="2"
                            aria-label="Slide 3"  style="background-color:transparent;border:none;outline:none">
                        <img src="~/Content/img/product/@Model.ImageDetail.Where(p=>p.Product.Equals(Model.Detail.Id)).Last().Url" class="d-block "
                             width="120px" height="140px" style="object-fit: cover; object-position: center; border-radius: 5px;" alt="...">
                    </button>

                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleDark"
                        data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleDark"
                        data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <div class="col-lg-6 col-md-12 pt-5 detail-main">
            <h5 class="title detail-name">@Model.Detail.Name</h5>
            <div class="price d-flex">
                <p class="price-new">$@(Model.Detail.Price - (Model.Detail.Price*Model.Detail.Discount)/100)</p>
                <span class="price-old ms-3">$@Model.Detail.Price</span>
            </div>
            <p class="detail-description">
                @Model.Detail.Description
            </p>
            <div class="quantity">
                <button class="btn btn-minus">
                    <i class="fa-solid fa-minus"></i>
                </button>
                <input class="input-qty" name="input-qty" type="text" min="1" max="@Model.Detail.Stock" value="1" readonly>
                <button class="btn btn-plus">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </div>
            
            <a class="btn btn-add mt-3" href="@Url.Action("AddToCart", "Cart", new { pid = Model.Detail.Id })">
            <span class="glyphicon glyphicon-shopping-cart"></span> 
            Add To Cart
            </a>
            <div class="detail-more mt-3">
                <p class="more-id pt-3">Product ID: <span>@Model.Detail.Id</span></p>
                <p class="more-categories">Gender: <span>@Model.Detail.Gender</span></p>
                <p class="more-brand">Apparatus: <span>@Model.Detail.Apparatus</span></p>
            </div>

        </div>
    </div>
</div>

<div class="detail container">
    <div class="row gy-5">
        <div class="col">
            <div class="p-5 bg-white rounded shadow mb-5 ">
                <ul id="myTab" role="tablist"
                    class="nav nav-tabs nav-pills flex-column flex-sm-row text-center bg-light border-0 rounded-nav">
                    <li class="nav-item flex-sm-fill">
                        <a id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home"
                           aria-selected="true" class="nav-link border-0 text-uppercase font-weight-bold active">WARRANTY</a>
                    </li>
                    <li class="nav-item flex-sm-fill">
                        <a id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile"
                           aria-selected="false" class="nav-link border-0 text-uppercase font-weight-bold">SPECIFICATIONS</a>
                    </li>
                </ul>
                <div id="myTabContent" class="tab-content">
                    <div id="home" role="tabpanel" aria-labelledby="home-tab"
                         class="tab-pane fade px-4 py-5 show active">
                        <p class="description">
                           @Model.Detail.Description
                        </p>
                        <h5 class="title pt-2 pb-2">Time Warranty: <span>@Model.Detail.WarrantyPeriod years </span></h5>
                        <h5 class="title pt-2 pb-2">Origin: <span>@Model.Detail.Origin</span></h5>
                        <h5 class="title pt-2 pb-2">Brand: <span>@Model.Detail.Brand</span></h5>
                        <h5 class="title pt-2 pb-2">Gender: <span>@Model.Detail.Gender </span></h5>
                        <h5 class="title pt-2 pb-2">Shipping: <span>Free Shipping</span></h5>
                    </div>
                    <div id="profile" role="tabpanel" aria-labelledby="profile-tab" class="tab-pane fade px-4 py-5">
                        <p class="description">
                            @Model.Detail.Description
                        </p>
                        <h5 class="title pt-2 pb-2 ">Diameter: <span>@Model.Detail.Diameter mm</span></h5>
                        <h5 class="title pt-2 pb-2">Width: <span>@Model.Detail.WireWidth mm</span></h5>
                        <h5 class="title pt-2 pb-2">Material: <span>@Model.Detail.Material</span></h5>
                        <h5 class="title pt-2 pb-2">Strap: <span>@Model.Detail.Strap</span></h5>
                        <h5 class="title pt-2 pb-2">Water Proof: <span>@Model.Detail.Waterproof</span></h5>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="related container">
    <h5 class="title">BEST SELLER PRODUCTS</h5>
    <div class="row gy-5">
        @foreach (var item in Model.BestSeller)
        {
            <div class="col-lg-3 col-md-4 ">
                <div class="p-3 border rounded-3 ">
                    <div class="card-product position-relative">
                        <img src="~/Content/img/product/@item.Avatar"
                             class="img-thumbnail border-0 h-250"
                             alt="">
                        <a href="~/Product/Detail?pid=@item.Id">
                            <h5 class="card-product__name text-center">
                              @item.Name
                            </h5>
                        </a>
                        <div class="d-flex justify-content-center">
                            <p class="card-product__new">$@(item.Price - (item.Price*item.Discount)/100)</p>
                            <p class="card-product__old text-decoration-line-through">$@item.Price</p>
                        </div>
                        <div class="card-label">
                            <h5 class="card-label__discount position-absolute">@item.Discount%</h5>
                        </div>
                        <div class="card-btn position-absolute">
                            <button class="card-btn__cart">
                                <i class="fa-solid fa-cart-arrow-down"></i>
                            </button>
                            <button class="card-btn__search">
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                    </div>

                </div>
            </div>

        }


    </div>
</div>

<script type="text/javascript">
    window.onload = function () {
        $('input.input-qty').each(function () {
            var $this = $(this),
                qty = $this.parent().find('.btn'),
                min = Number($this.attr('min')),
                max = Number($this.attr('max'))
            if (min == 0) {
                var d = 0
            } else d = min
            $(qty).on('click', function () {
                if ($(this).hasClass('btn-minus')) {
                    if (d > min) d += -1
                } else if ($(this).hasClass('btn-plus')) {
                    var x = Number($this.val()) + 1
                    if (x <= max) d += 1
                }
                $this.attr('value', d).val(d)
            })
        })
    }
</script>

